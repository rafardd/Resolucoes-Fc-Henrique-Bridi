funcao trocaAporB(s, a, b: string):inteiro
var
    qtd : inteiro
    str : string
    f, t : sequencia de string
inicio
    se abre(f, s) entao
        se cria(t, "temp") entao
            qtd <- 0
            enquanto NAO fds(f) faca
                leia(f, str)
                se str = a entao
                    escreva(t, b)
                    qtd <- qtd + 1
                senao
                    escreva(t, str)
                fim se
            fim enquanto
            fecha(t)
        senao
            escreva("O arquivo ", temp, "não pode ser criado")
            fecha(f)
            retorne -40404
        fim se
        fecha(f)
        apaga(s)
        renomeia(temp, s)
        retorne qtd
    senao
        escreva("O arquivo ", s, "não pode ser aberto")
        retorne -40404
    fim se
fim funcao